# Roles

---

[Overview](datamodel.md) | [Attributes](datamodel_attributes.md) | [Roles](datamodel_roles.md) | [Data model Mapping CSAF](datamodel_csaf.md) | [Data model Mapping NetBox](datamodel_netbox.md) | [Data model mapping IDTA](datamodel_idta.md)

---

## Purpose

The use case and reason for the implementation of parent/child relationship for roles is based on the [following issue #18245](https://github.com/netbox-community/netbox/issues/18245)

```text
In an environment where there are a lot of different device roles, it may be useful to be able to group them much like in the same way Tenants and Tenant Groups, or Contacts and Contact Groups are grouped today.

I can envisage that (for example) you may have a "Rack Infrastructure" Device Role Group which then has roles specific for "Patch Panel", "Power" etc.

Another example may be Network Switches, where you may want to segregate the Device Role based on function, while keeping them all under a Network Switch parent group.
```

Also, this feature can be used to group device roles for machine learning approach when not enough data is provided for a single device role but for a group.  

## Revision

There will be never THE definitive role structure. However, it should be reasonable and acceptable as well as adaptable.

|Sign | Action |
|-|-|
|:question:| group not sure, need reason |
|:exclamation: | need (clearer) description|
| :skull: | intended group is wrong ğŸ’€ |
|:no_entry_sign:|role not helpful ğŸš«|
|:white_check_mark:| ready for revision âœ…|

After revision the following tasks can be provided by `lazy.py` script in utils folder

- set color
- every role has all attributes: name, slug, parent, description, reason, color, vm_role

### Role Structure

> Please be aware when changing the following table that the structure of `device_role.yaml` will be set by the `|` sign.

```markdown
Primary device role
â”œâ”€â”€ Field device
â”‚   â”œâ”€â”€ Actuator âœ…
â”‚   â”œâ”€â”€ IIoT â“
â”‚   â”œâ”€â”€ Physical Sensor âœ…
â”‚   â”œâ”€â”€ NFC Reader âœ…
â”‚   â””â”€â”€ VFD âœ…
â”œâ”€â”€ Controller
â”‚   â”œâ”€â”€ CNC âœ…
â”‚   â”œâ”€â”€ IED âœ…
â”‚   â”œâ”€â”€ PLC âœ…
â”‚   â””â”€â”€ RTU âœ…
â”œâ”€â”€ IT-Serverâœ…
â”‚   â”œâ”€â”€ Communication âœ…
â”‚   â”‚   â”œâ”€â”€ Mail server âœ…
â”‚   â”‚   â”œâ”€â”€ real time communication server âœ…
â”‚   â”‚   â”œâ”€â”€ VPN serverâœ…
â”‚   â”‚   â”œâ”€â”€ Web serverâœ…
â”‚   â”œâ”€â”€ Data Storage
â”‚   â”‚   â”œâ”€â”€ Cloud server â“
â”‚   â”‚   â”œâ”€â”€ Data server ğŸš«
â”‚   â”‚   â”œâ”€â”€ File server âœ…
â”‚   â”‚   â”œâ”€â”€ Historianâœ…
â”‚   â”‚   â”œâ”€â”€ Media server âœ…
â”‚   â”‚   â””â”€â”€ NAS âœ…
â”‚   â”œâ”€â”€ Administration âœ…
â”‚   â”‚   â”œâ”€â”€ Active directory
â”‚   â”‚   â”œâ”€â”€ Application server â“
â”‚   â”‚   â”œâ”€â”€ Authentication server â“
â”‚   â”‚   â”œâ”€â”€ Domain controller â“
â”‚   â”‚   â””â”€â”€ SIEM â“
â”‚   â”œâ”€â”€ Management
â”‚   â”‚   â”œâ”€â”€ BMS â“
â”‚   â”‚   â”œâ”€â”€ Collaboration server â“
â”‚   â”‚   â”œâ”€â”€ PIMS âœ…
â”‚   â”‚   â”œâ”€â”€ PLM âœ…
â”‚   â”‚   â””â”€â”€ VCS âœ…
â”‚   â”œâ”€â”€ Virtual Host Device â“
â”‚   â”‚   â”œâ”€â”€ Hypervisor âœ…
â”‚   â”‚   â””â”€â”€ Virtual Machine Server âœ…
â”‚   â””â”€â”€ Network Service
â”‚       â”‚â”€â”€ DHCP server âœ…
â”‚       â”‚â”€â”€ DNS server âœ…
â”‚       â”‚â”€â”€ Load balancer âœ…
â”‚       â”‚â”€â”€ NTP server âœ…
â”œâ”€â”€ Network Structure::Magenta Pink
â”‚   â”œâ”€â”€ Access point âœ…
â”‚   â”œâ”€â”€ Bridge âœ…
â”‚   â”œâ”€â”€ Hub âœ…
â”‚   â”œâ”€â”€ Network Proxy âœ…
â”‚   â”œâ”€â”€ Repeater âœ…
â”‚   â”œâ”€â”€ Switch L2 âœ…
â”‚   â”œâ”€â”€ Switch unspecified âœ…
â”‚   â”œâ”€â”€ KVM â“
â”‚   â””â”€â”€ Gateway
â”‚       â”‚â”€â”€ Router âœ…
â”‚       â”‚â”€â”€ Switch L3 âœ…
â”‚       â”‚â”€â”€ Firewall âœ…
â”‚       â”‚â”€â”€ Protocol-Coupler âœ…
â”‚       â”‚â”€â”€ Modem âœ…
â”œâ”€â”€ SCADA
â”‚   â”œâ”€â”€ Building Automation System âœ…
â”‚   â”‚    â”œâ”€â”€ HVAC âœ…
â”‚   â”‚    â”œâ”€â”€ Lighting control âœ…
â”‚   â”‚    â”œâ”€â”€ Access Control
â”‚   â”‚       â”‚â”€â”€ Camera â“
â”‚   â”‚       â”‚â”€â”€ Electronic access control âœ…
â”‚   â”œâ”€â”€ DCS âœ…
â”‚   â”œâ”€â”€ PCS âœ…
â”œâ”€â”€ OT-Client
â”‚   â”œâ”€â”€ EWS âœ…
â”‚   â”œâ”€â”€ HMI âœ…
â”‚   â”œâ”€â”€ SCADA Client â“
â”‚   â””â”€â”€ Workstation â—ğŸš«â“
â”œâ”€â”€ Office
â”‚   â”œâ”€â”€ Photocopier âœ…
â”‚   â”œâ”€â”€ Printer âœ…
â”‚   â”œâ”€â”€ print server â“
â”‚   â””â”€â”€ Telephony âœ…
â”‚       â”‚â”€â”€ Fax âœ…
â”‚       â”‚â”€â”€ Phone âœ…
â”œâ”€â”€ Connected Device âœ…
â”‚   â”œâ”€â”€ IoT âœ…
â”‚   â””â”€â”€ Kiosk âœ…
â”œâ”€â”€ Monitoring âœ…
â”‚   â”œâ”€â”€ IDS âœ…   
â”‚   â”œâ”€â”€ IPS âœ…
â”‚   â”œâ”€â”€ Network sensor âœ…
â”‚   â””â”€â”€ Honeypot âœ…
â”œâ”€â”€ Unspecified âœ…
â”‚   â””â”€â”€ MES â“
```

### Role Color

#### Option 1

Note that the color of each device can be set using the `lazy.py` script wit the `set_color` function. The color scheme can be configured via the `device_roles_colortemplate.json` file. The basic assumption is:

- the main device roles have their own color
- the children of a parent have the same color
- the offspring color is getting darker

#### Option 2

Use the `set_role_color_by_csv_mark`function in `lazy.py` to create device_roles from markdown structure and `color.csv`.
